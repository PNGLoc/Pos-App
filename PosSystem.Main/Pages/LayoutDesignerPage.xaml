<UserControl x:Class="PosSystem.Main.Pages.LayoutDesignerPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             Background="#F0F2F5"
             d:DesignHeight="700"
             d:DesignWidth="1200">

    <UserControl.Resources>
        <DropShadowEffect x:Key="ShadowEffect"
                          Color="Black"
                          BlurRadius="15"
                          ShadowDepth="0"
                          Opacity="0.1"/>

        <Style x:Key="ToolboxButtonStyle"
               TargetType="Button">
            <Setter Property="Height"
                    Value="40"/>
            <Setter Property="HorizontalContentAlignment"
                    Value="Left"/>
            <Setter Property="Padding"
                    Value="15,0"/>
            <Setter Property="Margin"
                    Value="0,0,0,8"/>
            <Setter Property="Background"
                    Value="White"/>
            <Setter Property="BorderBrush"
                    Value="#E0E0E0"/>
            <Setter Property="BorderThickness"
                    Value="1"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="bd"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="5">
                            <ContentPresenter HorizontalAlignment="Left"
                                              VerticalAlignment="Center"
                                              Margin="{TemplateBinding Padding}"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver"
                                     Value="True">
                                <Setter TargetName="bd"
                                        Property="Background"
                                        Value="#F0F8FF"/>
                                <Setter TargetName="bd"
                                        Property="BorderBrush"
                                        Value="#007BFF"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ActionButtonStyle"
               TargetType="Button">
            <Setter Property="Padding"
                    Value="15,8"/>
            <Setter Property="Background"
                    Value="White"/>
            <Setter Property="BorderBrush"
                    Value="#DDD"/>
            <Setter Property="BorderThickness"
                    Value="1"/>
            <Setter Property="FontWeight"
                    Value="SemiBold"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="bd"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="4">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver"
                                     Value="True">
                                <Setter TargetName="bd"
                                        Property="Background"
                                        Value="#EEE"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ReceiptItemContainerStyle"
               TargetType="ListBoxItem">
            <Setter Property="HorizontalContentAlignment"
                    Value="Stretch"/>
            <Setter Property="Padding"
                    Value="0"/>
            <Setter Property="Margin"
                    Value="0,2"/>
            <Setter Property="BorderThickness"
                    Value="1"/>
            <Setter Property="BorderBrush"
                    Value="Transparent"/>
            <Setter Property="Background"
                    Value="Transparent"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListBoxItem">
                        <Border x:Name="bd"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                Background="{TemplateBinding Background}"
                                CornerRadius="3"
                                Padding="5">
                            <ContentPresenter/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsSelected"
                                     Value="True">
                                <Setter TargetName="bd"
                                        Property="BorderBrush"
                                        Value="#007BFF"/>
                                <Setter TargetName="bd"
                                        Property="Background"
                                        Value="#E3F2FD"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver"
                                     Value="True">
                                <Setter TargetName="bd"
                                        Property="Background"
                                        Value="#F5F5F5"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>

    <Grid Margin="15">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="280"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="320"/>
        </Grid.ColumnDefinitions>

        <Border Grid.Column="0"
                Background="White"
                CornerRadius="8"
                Margin="0,0,15,0"
                Padding="15">
            <Border.Effect>
                <DropShadowEffect Color="#DDD"
                                  BlurRadius="10"
                                  ShadowDepth="2"
                                  Opacity="0.3"/>
            </Border.Effect>
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <StackPanel>
                    <TextBlock x:Name="txtTitle"
                               Text="THIáº¾T Káº¾ MáºªU IN"
                               FontSize="18"
                               FontWeight="Bold"
                               Foreground="#333"
                               Margin="0,0,0,5"/>
                    <TextBlock Text="Chá»n thÃ nh pháº§n Ä‘á»ƒ thÃªm vÃ o máº«u"
                               FontSize="12"
                               Foreground="Gray"
                               Margin="0,0,0,20"/>
                </StackPanel>

                <ScrollViewer Grid.Row="1"
                              VerticalScrollBarVisibility="Auto">
                    <StackPanel x:Name="pnlToolbox">

                        <TextBlock Text="CÆ  Báº¢N"
                                   FontWeight="Bold"
                                   Foreground="#888"
                                   Margin="0,0,0,5"/>
                        <Button Content="ðŸ“ VÄƒn báº£n tÃ¹y Ã½"
                                Tag="Text"
                                Click="BtnToolbox_Click"
                                Style="{StaticResource ToolboxButtonStyle}"/>
                        <Button Content="âž– ÄÆ°á»ng káº» ngang"
                                Tag="Separator"
                                Click="BtnToolbox_Click"
                                Style="{StaticResource ToolboxButtonStyle}"/>
                        <Button Content="ðŸ–¼ï¸ Logo / áº¢nh"
                                Tag="Logo"
                                Click="BtnToolbox_Click"
                                Style="{StaticResource ToolboxButtonStyle}"/>
                        <Button Content="â¬› MÃ£ QR"
                                Tag="QRCode"
                                Click="BtnToolbox_Click"
                                Style="{StaticResource ToolboxButtonStyle}"/>

                        <TextBlock Text="THÃ”NG TIN (Biáº¿n sá»‘)"
                                   FontWeight="Bold"
                                   Foreground="#888"
                                   Margin="0,15,0,5"/>

                        <Button Content="ðŸ“ TÃªn bÃ n: {Table}"
                                Tag="TextTable"
                                Click="BtnToolbox_Click"
                                Style="{StaticResource ToolboxButtonStyle}"/>
                        <Button Content="ðŸ‘¤ Thu ngÃ¢n: {Staff}"
                                Tag="TextStaff"
                                Click="BtnToolbox_Click"
                                Style="{StaticResource ToolboxButtonStyle}"/>
                        <Button Content="ðŸ•’ Giá» vÃ o &amp; Giá» in"
                                Tag="TextTime"
                                Click="BtnToolbox_Click"
                                Style="{StaticResource ToolboxButtonStyle}"/>
                        <Button Content="â³ Thá»i gian ngá»“i"
                                Tag="TextDuration"
                                Click="BtnToolbox_Click"
                                Style="{StaticResource ToolboxButtonStyle}"/>

                        <TextBlock Text="Báº¾P / BAR"
                                   FontWeight="Bold"
                                   Foreground="#888"
                                   Margin="0,15,0,5"/>
                        <Button Content="ðŸ”” Sá»‘ Ä‘á»£t gá»i: {Batch}"
                                Tag="BatchNumber"
                                Click="BtnToolbox_Click"
                                Style="{StaticResource ToolboxButtonStyle}"/>
                        <Button Content="ðŸ¥˜ Danh sÃ¡ch mÃ³n (Báº¿p)"
                                Tag="KitchenOrderDetails"
                                Click="BtnToolbox_Click"
                                Style="{StaticResource ToolboxButtonStyle}"/>

                        <TextBlock Text="HÃ“A ÄÆ N"
                                   FontWeight="Bold"
                                   Foreground="#888"
                                   Margin="0,15,0,5"/>
                        <Button Content="ðŸ“‹ Danh sÃ¡ch mÃ³n (Bill)"
                                Tag="OrderDetails"
                                Click="BtnToolbox_Click"
                                Style="{StaticResource ToolboxButtonStyle}"/>
                        <Button Content="ðŸ’° Tá»•ng cá»™ng tiá»n"
                                Tag="Total"
                                Click="BtnToolbox_Click"
                                Style="{StaticResource ToolboxButtonStyle}"/>

                    </StackPanel>
                </ScrollViewer>
            </Grid>
        </Border>

        <Grid Grid.Column="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <Border Background="#555"
                    CornerRadius="8"
                    Padding="20">
                <Border Background="White"
                        Width="380"
                        VerticalAlignment="Stretch"
                        Effect="{StaticResource ShadowEffect}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <ListBox x:Name="lstElements"
                                 Grid.Row="1"
                                 SelectionChanged="LstElements_SelectionChanged"
                                 ItemContainerStyle="{StaticResource ReceiptItemContainerStyle}"
                                 BorderThickness="0"
                                 Background="Transparent"
                                 ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                 Padding="10">

                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <Grid>
                                        <TextBlock Text="{Binding DisplayPreview}"
                                                   FontSize="{Binding FontSize}"
                                                   FontWeight="{Binding FontWeightDisplay}"
                                                   TextAlignment="{Binding TextAlignmentDisplay}"
                                                   TextWrapping="Wrap"
                                                   Visibility="{Binding IsTextVisible}"/>

                                        <Border BorderBrush="Black"
                                                BorderThickness="0,0,0,1"
                                                Height="1"
                                                Visibility="{Binding IsSeparatorVisible}"/>

                                        <Border Background="#F0F0F0"
                                                Height="80"
                                                Width="80"
                                                HorizontalAlignment="{Binding HorizontalAlignDisplay}"
                                                Visibility="{Binding IsImageVisible}">
                                            <StackPanel VerticalAlignment="Center"
                                                        HorizontalAlignment="Center">
                                                <TextBlock Text="ðŸ–¼ï¸"
                                                           FontSize="20"
                                                           HorizontalAlignment="Center"/>
                                                <TextBlock Text="{Binding Content}"
                                                           FontSize="10"
                                                           Foreground="Gray"/>
                                            </StackPanel>
                                        </Border>

                                    </Grid>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </Grid>
                </Border>
            </Border>

            <Border Grid.Row="1"
                    Background="White"
                    CornerRadius="8"
                    Margin="0,15,0,0"
                    Padding="10">
                <StackPanel Orientation="Horizontal"
                            HorizontalAlignment="Center">
                    <Button Content="â¬† LÃªn"
                            Click="BtnUp_Click"
                            Style="{StaticResource ActionButtonStyle}"
                            Margin="0,0,10,0"/>
                    <Button Content="â¬‡ Xuá»‘ng"
                            Click="BtnDown_Click"
                            Style="{StaticResource ActionButtonStyle}"
                            Margin="0,0,10,0"/>
                    <Button Content="ðŸ—‘ XÃ³a dÃ²ng"
                            Click="BtnDelete_Click"
                            Background="#DC3545"
                            Foreground="White"
                            Style="{StaticResource ActionButtonStyle}"/>
                </StackPanel>
            </Border>
        </Grid>

        <Border Grid.Column="2"
                Background="White"
                CornerRadius="8"
                Margin="15,0,0,0"
                Padding="15">
            <Border.Effect>
                <DropShadowEffect Color="#DDD"
                        BlurRadius="10"
                        ShadowDepth="2"
                        Opacity="0.3"/>
            </Border.Effect>

            <StackPanel x:Name="pnlProperties"
                    IsEnabled="False">
                <TextBlock Text="TÃ™Y CHá»ˆNH"
                        FontSize="16"
                        FontWeight="Bold"
                        Margin="0,0,0,15"/>

                <TextBlock Text="Äang chá»n:"
                        Foreground="Gray"
                        FontSize="12"/>
                <TextBlock x:Name="lblSelectedType"
                        Text="None"
                        FontWeight="Bold"
                        FontSize="14"
                        Margin="0,0,0,15"/>

                <StackPanel x:Name="pnlTextProp">
                    <TextBlock Text="Ná»™i dung hiá»ƒn thá»‹:"
                            Margin="0,0,0,5"/>
                    <TextBox x:Name="txtContent"
                            Height="80"
                            TextWrapping="Wrap"
                            Padding="5"
                             TextChanged="TxtContent_TextChanged"
                            BorderBrush="#DDD"
                            BorderThickness="1"/>

                    <TextBlock Text="Äá»‹nh dáº¡ng:"
                            Margin="0,15,0,5"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <TextBlock Text="CÄƒn lá»:"
                                    FontSize="12"
                                    Foreground="Gray"/>
                            <ComboBox x:Name="cboAlign"
                                    SelectionChanged="Prop_Changed"
                                    Margin="0,5,5,0"
                                    Padding="5">
                                <ComboBoxItem Content="Left (TrÃ¡i)"/>
                                <ComboBoxItem Content="Center (Giá»¯a)"/>
                                <ComboBoxItem Content="Right (Pháº£i)"/>
                            </ComboBox>
                        </StackPanel>
                        <StackPanel Grid.Column="1">
                            <TextBlock Text="Cá»¡ chá»¯:"
                                    FontSize="12"
                                    Foreground="Gray"/>
                            <TextBox x:Name="txtFontSize"
                                    TextChanged="Prop_Changed"
                                    Margin="5,5,0,0"
                                    Padding="5"/>
                        </StackPanel>
                    </Grid>
                    <CheckBox x:Name="chkBold"
                            Content="In Ä‘áº­m (Bold)"
                            Margin="0,15,0,0"
                            Checked="Prop_Changed"
                            Unchecked="Prop_Changed"/>
                </StackPanel>

                <StackPanel x:Name="pnlOptionProp"
                        Visibility="Collapsed"
                        Margin="0,15,0,0">
                    <TextBlock Text="TÃ™Y CHá»ŒN NÃ‚NG CAO"
                            FontWeight="Bold"
                            FontSize="12"
                            Foreground="Gray"
                            Margin="0,0,0,5"/>

                    <StackPanel x:Name="optOrderDetails">
                        <CheckBox x:Name="chkShowNote"
                                Content="In ghi chÃº (Note)"
                                  Checked="Prop_Changed"
                                Unchecked="Prop_Changed"
                                Margin="0,5"/>
                    </StackPanel>

                    <StackPanel x:Name="optTotal">
                        <CheckBox x:Name="chkShowSubTotal"
                                Content="In dÃ²ng Táº¡m tÃ­nh"
                                  Checked="Prop_Changed"
                                Unchecked="Prop_Changed"
                                Margin="0,5"/>
                        <CheckBox x:Name="chkShowDiscount"
                                Content="In dÃ²ng Giáº£m giÃ¡ / Thuáº¿"
                                  Checked="Prop_Changed"
                                Unchecked="Prop_Changed"
                                Margin="0,5"/>
                    </StackPanel>
                </StackPanel>

                <StackPanel x:Name="pnlImageProp"
                        Visibility="Collapsed">
                    <Button Content="ðŸ“‚ Táº£i áº£nh lÃªn..."
                            Click="BtnUploadImage_Click"
                            Padding="10"
                            Background="#EEE"
                            BorderThickness="0"
                            Margin="0,0,0,10"/>
                    <Image x:Name="imgPreview"
                            Height="120"
                            Stretch="Uniform"/>
                </StackPanel>

                <Separator Margin="0,20"/>
                <CheckBox x:Name="chkVisible"
                        Content="Hiá»ƒn thá»‹ trÃªn máº«u in"
                        IsChecked="True"
                        Checked="Prop_Changed"
                        Unchecked="Prop_Changed"/>

                <Button Content="ðŸ’¾ LÆ¯U Cáº¤U TRÃšC"
                        Click="BtnSave_Click"
                        Height="45"
                        Margin="0,30,0,0"
                        Background="#007BFF"
                        Foreground="White"
                        FontWeight="Bold"
                        FontSize="16"
                        BorderThickness="0">
                    <Button.Resources>
                        <Style TargetType="Border">
                            <Setter Property="CornerRadius"
                                    Value="5"/>
                        </Style>
                    </Button.Resources>
                </Button>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>