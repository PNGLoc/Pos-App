<UserControl x:Class="PosSystem.Main.Pages.MenuSetupPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Grid>
        <TabControl>
            <!-- TAB 1: DANH MỤC (CATEGORY) -->
            <TabItem Header="Danh mục món"
                    FontSize="14"
                    Padding="10">
                <Grid Margin="10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="300"/>
                    </Grid.ColumnDefinitions>

                    <DataGrid x:Name="dgCats"
                            Grid.Column="0"
                            AutoGenerateColumns="False"
                            CanUserAddRows="False"
                            SelectionChanged="dgCats_SelectionChanged">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Tên nhóm"
                                    Binding="{Binding CategoryName}"
                                    Width="*"/>
                            <DataGridTextColumn Header="Thứ tự"
                                    Binding="{Binding OrderIndex}"
                                    Width="60"/>
                            <!-- Hiển thị ID máy in nếu cần -->
                        </DataGrid.Columns>
                    </DataGrid>

                    <StackPanel Grid.Column="1"
                            Margin="10,0,0,0">
                        <TextBlock Text="Tên danh mục:"/>
                        <TextBox x:Name="txtCatName"
                                Height="35"
                                Margin="0,5,0,10"/>

                        <TextBlock Text="Thứ tự hiển thị:"/>
                        <TextBox x:Name="txtCatIndex"
                                Height="35"
                                Margin="0,5,0,10"/>

                        <TextBlock Text="Máy in bếp phụ trách:"/>
                        <ComboBox x:Name="cboPrinters"
                                Height="35"
                                DisplayMemberPath="PrinterName"
                                SelectedValuePath="PrinterID"
                                Margin="0,5,0,20"/>

                        <StackPanel Orientation="Horizontal">
                            <Button Content="Thêm"
                                    Click="BtnAddCat_Click"
                                    Width="80"
                                    Height="35"
                                    Margin="5"/>
                            <Button Content="Sửa"
                                    Click="BtnUpdateCat_Click"
                                    Width="80"
                                    Height="35"
                                    Margin="5"/>
                            <Button Content="Xóa"
                                    Click="BtnDeleteCat_Click"
                                    Width="80"
                                    Height="35"
                                    Margin="5"/>
                        </StackPanel>
                    </StackPanel>
                </Grid>
            </TabItem>

            <!-- TAB 2: MÓN ĂN (DISH) -->
            <TabItem Header="Món ăn"
                    FontSize="14"
                    Padding="10">
                <Grid Margin="10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="350"/>
                    </Grid.ColumnDefinitions>

                    <DataGrid x:Name="dgDishes"
                            Grid.Column="0"
                            AutoGenerateColumns="False"
                            CanUserAddRows="False"
                            SelectionChanged="dgDishes_SelectionChanged">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Tên món"
                                    Binding="{Binding DishName}"
                                    Width="*"/>
                            <DataGridTextColumn Header="Giá"
                                    Binding="{Binding Price, StringFormat={}{0:N0}}"
                                    Width="80"/>
                            <DataGridTextColumn Header="Đơn vị"
                                    Binding="{Binding Unit}"
                                    Width="60"/>
                            <DataGridTextColumn Header="Nhóm"
                                    Binding="{Binding Category.CategoryName}"
                                    Width="100"/>
                            <DataGridTextColumn Header="Loại"
                                    Binding="{Binding DishType}"
                                    Width="60"/>
                            <DataGridTextColumn Header="Trạng thái"
                                    Binding="{Binding DishStatus}"
                                    Width="80"/>
                        </DataGrid.Columns>
                    </DataGrid>

                    <!-- Form Món Ăn -->
                    <ScrollViewer Grid.Column="1"
                            Margin="10,0,0,0">
                        <StackPanel>
                            <TextBlock Text="Tên món ăn:"/>
                            <TextBox x:Name="txtDishName"
                                    Height="35"
                                    Margin="0,5,0,10"/>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel Grid.Column="0"
                                        Margin="0,0,5,0">
                                    <TextBlock Text="Giá bán:"/>
                                    <TextBox x:Name="txtPrice"
                                            Height="35"/>
                                </StackPanel>
                                <StackPanel Grid.Column="1">
                                    <TextBlock Text="Đơn vị:"/>
                                    <TextBox x:Name="txtUnit"
                                            Height="35"/>
                                </StackPanel>
                            </Grid>

                            <TextBlock Text="Thuộc nhóm:"
                                    Margin="0,10,0,0"/>
                            <ComboBox x:Name="cboDishCat"
                                    Height="35"
                                    DisplayMemberPath="CategoryName"
                                    SelectedValuePath="CategoryID"
                                    Margin="0,5,0,10"/>

                            <TextBlock Text="Loại chế biến:"/>
                            <ComboBox x:Name="cboDishType"
                                    Height="35"
                                    Margin="0,5,0,10"
                                    SelectedIndex="0">
                                <ComboBoxItem Content="Food"/>
                                <ComboBoxItem Content="Drink"/>
                            </ComboBox>

                            <CheckBox x:Name="chkActive"
                                    Content="Đang kinh doanh (Active)"
                                    IsChecked="True"
                                    Margin="0,10"/>

                            <!-- Upload Ảnh -->
                            <TextBlock Text="Hình ảnh:"/>
                            <Grid Margin="0,5,0,20">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="80"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Border BorderBrush="#DDD"
                                        BorderThickness="1"
                                        Height="80">
                                    <Image x:Name="imgPreview"
                                            Stretch="Uniform"/>
                                </Border>
                                <Button Grid.Column="1"
                                        Content="Chọn ảnh..."
                                        Margin="10,0,0,0"
                                        Height="30"
                                        Click="BtnUploadImg_Click"/>
                            </Grid>

                            <StackPanel Orientation="Horizontal"
                                    HorizontalAlignment="Center">
                                <Button Content="Thêm Món"
                                        Click="BtnAddDish_Click"
                                        Width="80"
                                        Height="40"
                                        Background="#28A745"
                                        Foreground="White"
                                        Margin="5"/>
                                <Button Content="Cập nhật"
                                        Click="BtnUpdateDish_Click"
                                        Width="80"
                                        Height="40"
                                        Background="#007BFF"
                                        Foreground="White"
                                        Margin="5"/>
                                <Button Content="Xóa"
                                        Click="BtnDeleteDish_Click"
                                        Width="70"
                                        Height="40"
                                        Background="#DC3545"
                                        Foreground="White"
                                        Margin="5"/>
                            </StackPanel>
                            <Button Content="Làm mới form"
                                    Click="BtnClearDish_Click"
                                    Margin="0,10"/>
                        </StackPanel>
                    </ScrollViewer>
                </Grid>
            </TabItem>
        </TabControl>
    </Grid>
</UserControl>